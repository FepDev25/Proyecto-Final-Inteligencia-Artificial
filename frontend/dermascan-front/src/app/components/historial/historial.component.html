<div class="container mx-auto p-4">
  <h1 class="text-2xl font-bold mb-4">Historial de Predicciones</h1>
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" (scroll)="onScroll()">
    <div *ngFor="let item of historial" class="bg-white rounded-lg shadow-md p-4">
      <img [src]="item.url_imagen" alt="Imagen de la predicciÃ³n" class="w-full h-48 object-cover rounded-t-lg">
      <div class="p-4">
        <h2 class="text-xl font-semibold">{{ item.enfermedad?.nombre_enfermedad || 'No diagnosticado' }}</h2>
        <p class="text-gray-600">{{ item.fecha | date: 'medium' }}</p>
        <p class="text-gray-800 mt-2">{{ item.resumen }}</p>
        <div *ngIf="item.porcentaje_coincidencia" class="mt-2">
          <span class="font-bold">Confianza:</span>
          <div class="w-full bg-gray-200 rounded-full h-2.5">
            <div class="bg-blue-600 h-2.5 rounded-full" [style.width.%]="item.porcentaje_coincidencia ? item.porcentaje_coincidencia * 100 : 0"></div>
          </div>
          <span class="text-sm">{{ (item.porcentaje_coincidencia ? item.porcentaje_coincidencia * 100 : 0) | number:'1.0-0' }}%</span>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="loading" class="text-center mt-4">
    <p>Cargando...</p>
  </div>
</div>